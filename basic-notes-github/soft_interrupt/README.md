# 进程=资源+指令执行序列
线程：保留了并发的优点，避免进程切换代价（不需要映射表【资源】的切换）

指令的切换+映射表的切换——>进程切换

指令的切换——>线程的切换

# 用户级线程
pthread_create()创建多个线程
在单核处理器上，为了进一步实现并发，线程需要Yield()主动释放控制权

# 软中断
Linux系统为了解决中断处理程序执行时间过长和中断丢失的问题，将中断过程分为两个阶段，即硬中断和软中断。
- 硬中断直接处理硬件请求，负责耗时短的工作，特点是快速执行。
- 软中断由内核触发，负责完成硬中断未完成的工作，通常是耗时比较长的事情，特点是延迟执行。

Linux中的软中断包括网络收发、定时、调度、RCU锁等类型 

# Linux内核与Windows内核区别分析

内核的四个基本能力：
1、管理进程、线程，决定哪个进程、线程使用CPU
2、管理内存，决定内存的分配和回收，即内存管理
3、管理硬件设备，为进程与硬件设备之间提供通信能力，即硬件通信能力
4、提供系统调用，应用程序要运行更高权限的服务，需要有系统调用，它是用户程序与操作系统之间的接口

# 缺页中断与一般中断的主要区别
1、缺页中断在指令执行期间产生和处理中断信号，而一般中断在一条指令执行完成后检查和处理中断信号
2、缺页中断返回到该指令的开始重新执行该指令，而一般中断返回到该指令的下一个指令执行。

# 页面置换算法
- 磁盘中的页面换入到物理内存中时，需要在物理内存中找空闲页，如果找到空闲页，就把页面换入到物理内存。如果找不到空闲页，说明此时内存已满，需要页面置换算法选择一个物理页换出到磁盘，然后把换出的页表项状态设置为无效，最后把正在访问的页面装入到物理页中。

### 常见的页面置换算法：
- 最佳页面置换算法
	- 置换在未来最长时间不访问的页面，是一种最为理想的置换算法，主要用于衡量算法效率，算法效率越接近该算法的效率越好

0- 先进先出置换算法
	- 将在内存驻留时间最长的页面换出

- 最近最久未使用的置换算法（LRC算法）
	- 选择最长时间没有被访问的页面进行置换，算法近似最佳页面置换算法，最佳页面置换算法是用未来的使用情况推测当下的换出页面，而LRC算法是通过历史的使用情况来推测当下的换出页面，具有可实现的特性。
	- 局限：维护链表开销很大

- 时钟页面置换算法
	- 把页表保存在一个类似钟面的“环形链表”中，指针指向最老的页面，当发生缺页中断时，算法检查指针指向的页面
	- 若该页面的访问位是0，就换出该页面，把新的页面换入，表指针前移一个位置
	- 若访问位是1就清除访问位（设置为0），把表指针前移一个位置，重复算法直到找到访问位为0的页面位置

- 最不常用置换算法
	- 对每个页面设置一个“访问计数器”，当一个页面被访问时，页面的访问计数器就加1，发生缺页中断需要换出页面时，选择访问计数最小的那个页面，并将其淘汰。

# 磁盘调度算法
- 磁盘调度算法目的比较简单，为了提高磁盘的访问性能，一般通过优化磁盘的访问请求顺序来实现。

### 常见的磁盘调度算法：
- 先来先服务算法
	- 先到来的请求，先被服务

- 最短寻道时间优先算法
	- 优先选择从当前磁头位置所需寻道时间最短的请求
		- 局限：存在请求的饥饿，若后续请求的寻道时间均较小，可能导致最早的较大寻道时间请求永远不被相应。
	
- 扫描算法
	- 为了避免磁头在小区域内来回移动导致请求饥饿，规定磁头在一个方向上移动，访问所有未完成的请求，直到磁头到达该方向上的最后的磁道，才调换方向。
		- 局限：中间部分的磁道比较占便宜，中间部分相比其他部分的响应频率高很多。


- 循环扫描算法
	- 规定只有磁头朝着某个特定方向移动时，才处理磁道访问请求，而返回时直接快速移动至靠边缘的磁道，即复位磁头，且复位过程中不处理任何请求。该算法的特点是磁道只相应一个方向上的请求。

- Look与C-Look算法
	- 磁头不再移动到最末端位置才返回，磁头在移动到最远请求的位置，立即回返
